<div class="example-container">
    <div class="example-loading-shade"></div>
    <div class="example-table-container">
        <div class="container-balanced">
            <div class="flex flex-1 custom">
                <div class="flex-2">
                    <div class="search">
                        <div class=rsearch>
                            <mat-icon class="color-60 search-icon">search</mat-icon>
                            <input class="sinput color-60" type="Standard" label=""
                                (input)="applyFilter($event.target.value)" placeholder="Search" maxlength="200">
                        </div>
                    </div>
                </div>
                <div class="flex-2 right-align">
                    <button type="button" mat-button class="create-btn" *ngIf="isCreate" (click)="onCreateClick()">
                        Create new
                    </button>
                </div>
            </div>
        </div>
        <!-- </mat-form-field> -->
        <mat-table #table matSort [ngStyle]="{'height': bodyHeight}" [matSortActive]="tableData!.sortColumn"
            [matSortDirection]="tableData!.sortState" [dataSource]="dataSource"
            class="example-table table1 responsiveTable" *ngIf="dataSource.filteredData.length > 0">
            <ng-container matColumnDef="{{col.key}}" *ngFor="let col of tableData!.columns">
                <mat-header-cell *matHeaderCellDef mat-sort-header class=".h-400-r-14-l color-60"> {{col.displayName}}
                </mat-header-cell>
                <mat-cell *matCellDef="let element" (click)="onRowClick(element)">
                    <span *ngIf="!col.isList && col.key != 'eventName'" class="h-400-r-14-l color-87 textclass">
                        {{element[col.key]}} {{col.isList}}
                    </span>
                    <span *ngIf="!col.isList && col.key == 'eventName'" class="h-400-r-14-l color-87 textclass">
                        <img src="{{element.eventThumbnail | pipePublicURL }}" height="40" width="50"
                            *ngIf="element.eventThumbnail" (click)="showImageDialog(element.eventThumbnail)"
                            class="cursor">
                        <img src="/assets/icons/Events_default.png" *ngIf="!element.eventThumbnail" height="40"
                            width="50" class="cursor">
                        <span class="margin-left-m">{{element[col.key]}} {{col.isList}}</span>
                    </span>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="Menu">
                <mat-header-cell *matHeaderCellDef class="clr-darkish-blue action-header">

                </mat-header-cell>
                <mat-cell *matCellDef="let row" class="action-cell">
                    <button type="button" mat-icon-button i18n-aria-label aria-label="action items"
                        *ngIf="currentFilter !== 'archive'" [matMenuTriggerFor]="cardMenu"
                        [matMenuTriggerData]="{'data':row}" class="action-btn">
                        <mat-icon>more_horiz</mat-icon>
                    </button>
                </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="getFinalColumns()"></mat-header-row>
            <mat-row *matRowDef="let row; columns: getFinalColumns();" (click)="selection.toggle(row);">
            </mat-row>
            <div *ngIf="dataSource.filteredData.length <= 0">
                <mat-row *matRowDef="let row; columns: getFinalColumns();"
                    (click)="selection.toggle(row); onRowClick(row)">
                    <!-- ssss -->
                </mat-row>
            </div>
        </mat-table>
    </div>
    <div *ngIf="dataSource.filteredData.length <= 0" class="h-600-s-20-m color-60 mt-4 mb-4 text-center">
        No events found
    </div>
    <mat-paginator [hidden]="dataSource && dataSource.filteredData.length < 1" [length]="length" [pageSize]="pageSize"
        [pageSizeOptions]="pageSizeOptions" class="mt-1">
    </mat-paginator>
</div>

<mat-menu #cardMenu="matMenu">
    <ng-template matMenuContent let-rowData="data">
        <button *ngIf="rowData && rowData.canArchive" (click)="buttonClick('update event',rowData)" mat-menu-item
            name="channel-analytics-button" class="ws-mat-primary-text" i18n-aria-label aria-label="Analytics">
            <mat-icon class="margin-right-xs">create</mat-icon><span>Update event</span>
        </button>
        <button *ngIf="rowData && rowData.canArchive" (click)="buttonClick('archive',rowData)" mat-menu-item
            name="channel-analytics-button" class="ws-mat-primary-text" i18n-aria-label aria-label="Analytics">
            <mat-icon class="margin-right-xs">archive</mat-icon><span>Archive event</span>
        </button>
    </ng-template>
</mat-menu>