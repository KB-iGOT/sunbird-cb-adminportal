<div class="container-balanced">
  <div class="page_title_flex">
    <div class="flex sectors-link">
      <ws-widget-breadcrumbs-org
        [widgetData]="{titles:[{title:'Sectors', url:'/app/home/sectors'},{ title:'Add New Sector',url:'none'}] }">
      </ws-widget-breadcrumbs-org>
    </div>
  </div>
  <form class="create-sector-form" [formGroup]="addSectorForm">
    <div class="flex flex-4 flex-column">
      <div class="profile-container">
        <div class="profile-box">
          <div class="input-column px-2 ws-mat-accent-border mb-6 padding-top-m
            padding-bottom-m padding-right-xl padding-left-l" id="datetime">
            <label class="heading">Sectors</label>
            <div class="input-wrapper margin-top-s">

              <div class="flex-parent-element">
                <div class="flex-child-element">
                  <label for="eventDate" class=" margin-remove-bottom form-label required"
                    i18n="Event Date label|Label which explains the user to enter event date" i18n-aria-label
                    aria-label="Event Date label">
                    Sector Name
                  </label>
                  <mat-form-field appearance="outline" class="margin-top-xs margin-bottom-m sector-title">
                    <input id="sectorTitle" matInput #sectorTitle formControlName="sectorTitle" i18n-placeholder
                      placeholder="Add sector name here" i18n-aria-label aria-label="Sector Title input"
                      class="form-input" maxlength="70" [disabled]="isDisabled" />
                    <mat-hint>
                      <div class="flex title-hint">
                        <span>Only ( a-z/A-Z , 0-9 . - _ $ / : [ ]' ' !) characters are supported</span>
                        <span>{{sectorTitle.value.length}}/70 characters</span>
                      </div>
                    </mat-hint>
                  </mat-form-field>
                </div>
                <div class="flex-child-element">
                  <label for="icon" class=" margin-remove-bottom form-label required"
                    i18n="Sector icon label|Label which explains the user to select icon" i18n-aria-label
                    aria-label="Sector icon label">
                    Select Icon
                  </label>
                  <div>Icons will be cropped to 24x24 pixels</div>
                  <div class="image-thumb margin-top-m"
                    [ngClass]="{'seleted-image': addSectorForm.controls.imgUrl.value}">
                    <div class="camera">
                      <mat-icon class="cam-icon">photo_camera</mat-icon>
                    </div>
                    <div class="uploaded-img">

                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>

  <div class="flex flex-4 flex-column">
    <div class="profile-container">
      <div class="profile-box">
        <div class="input-column px-2 ws-mat-accent-border mb-6 padding-top-m
                padding-bottom-m padding-right-xl padding-left-l" id="datetime">
          <label class="heading">Sub-sectors</label>
          <div class="input-wrapper margin-top-s">
            <form [formGroup]="myForm" class="create-subsectors-form">
              <div formArrayName="textboxes">
                <div *ngFor="let control of textboxes.controls; let i = index">
                  <div class="flex-parent-element margin-bottom-l">
                    <div class="flex-child-element flex">
                      <mat-form-field appearance="outline" class="sector-title">
                        <input matInput [formControl]="control" placeholder="Enter text" class="sub-sector-name">
                      </mat-form-field>
                      <button mat-button [disabled]="control.disabled" class="remove-btn" type="button"
                        (click)="removeTextbox(i)">
                        <mat-icon>close</mat-icon> &nbsp;Remove
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="input-wrapper">
            <div class="flex add-sub-sector">
              <div class="cursor-pointer flex" (click)="addTextbox()">
                <mat-icon>add_circle</mat-icon>&nbsp; Add Sub-sector
              </div>
            </div>
          </div>
          <div class="flex margin-top-l">
            <div class="margin-right-l">
              <button mat-stroked-button color="accent" type="button" class="mat-accent-border flex-auto-display"
                (click)="goToList()">
                <span i18n>Cancel</span>
              </button>
            </div>
            <div class="">
              <button mat-button class="create-btn btn-success" type="button" [disabled]="!myForm.valid"
                (click)="onSubSectorSubmit()">
                <span i18n>Save</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="loading" class="mt-5 pr-4 flex items-center justify-center">
  <mat-spinner [diameter]="30"></mat-spinner>
</div>